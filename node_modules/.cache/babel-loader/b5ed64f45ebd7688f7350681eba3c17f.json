{"remainingRequest":"C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\src\\views\\login\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\src\\views\\login\\Login.vue","mtime":1607158731000},{"path":"C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\babel.config.js","mtime":1592841393000},{"path":"C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL1BpcGlrL0RvY3VtZW50cy9KSU5HRE9OR0RBT0pJQS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgcmVhY3RpdmUsIHRvUmVmcyB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyBwb3N0IH0gZnJvbSAnLi4vLi4vdXRpbHMvcmVxdWVzdCc7CmltcG9ydCBUb2FzdCwgeyB1c2VUb2FzdEVmZmVjdCB9IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvVG9hc3QnOyAvLyDlpITnkIbms6jlhozpgLvovpEKCnZhciB1c2VMb2dpbkVmZmVjdCA9IGZ1bmN0aW9uIHVzZUxvZ2luRWZmZWN0KHNob3dUb2FzdCkgewogIHZhciByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICB2YXIgZGF0YSA9IHJlYWN0aXZlKHsKICAgIHVzZXJuYW1lOiAnJywKICAgIHBhc3N3b3JkOiAnJwogIH0pOwoKICB2YXIgaGFuZGxlTG9naW4gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciByZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gcG9zdCgnL2FwaS91c2VyL2xvZ2luJywgewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IGRhdGEudXNlcm5hbWUsCiAgICAgICAgICAgICAgICBwYXNzd29yZDogZGF0YS5wYXNzd29yZAogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgIGlmICgocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LmVycm5vKSA9PT0gMCkgewogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmlzTG9naW4gPSB0cnVlOwogICAgICAgICAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzaG93VG9hc3QoJ+eZu+mZhuWksei0pScpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgc2hvd1RvYXN0KCfor7fmsYLlpLHotKUnKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgN11dKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlTG9naW4oKSB7CiAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKTsKCiAgdmFyIF90b1JlZnMgPSB0b1JlZnMoZGF0YSksCiAgICAgIHVzZXJuYW1lID0gX3RvUmVmcy51c2VybmFtZSwKICAgICAgcGFzc3dvcmQgPSBfdG9SZWZzLnBhc3N3b3JkOwoKICByZXR1cm4gewogICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgcGFzc3dvcmQ6IHBhc3N3b3JkLAogICAgaGFuZGxlTG9naW46IGhhbmRsZUxvZ2luCiAgfTsKfTsgLy8g5aSE55CG5rOo5YaM6Lez6L2sCgoKdmFyIHVzZVJlZ2lzdGVyRWZmZWN0ID0gZnVuY3Rpb24gdXNlUmVnaXN0ZXJFZmZlY3QoKSB7CiAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwoKICB2YXIgaGFuZGxlUmVnaXN0ZXJDbGljayA9IGZ1bmN0aW9uIGhhbmRsZVJlZ2lzdGVyQ2xpY2soKSB7CiAgICByb3V0ZXIucHVzaCh7CiAgICAgIG5hbWU6ICdSZWdpc3RlcicKICAgIH0pOwogIH07CgogIHJldHVybiB7CiAgICBoYW5kbGVSZWdpc3RlckNsaWNrOiBoYW5kbGVSZWdpc3RlckNsaWNrCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudHM6IHsKICAgIFRvYXN0OiBUb2FzdAogIH0sCiAgLy8g6IGM6LSj5bCx5piv5ZGK6K+J5L2g77yM5Luj56CB5omn6KGM55qE5LiA5Liq5rWB56iLCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIF91c2VUb2FzdEVmZmVjdCA9IHVzZVRvYXN0RWZmZWN0KCksCiAgICAgICAgc2hvdyA9IF91c2VUb2FzdEVmZmVjdC5zaG93LAogICAgICAgIHRvYXN0TWVzc2FnZSA9IF91c2VUb2FzdEVmZmVjdC50b2FzdE1lc3NhZ2UsCiAgICAgICAgc2hvd1RvYXN0ID0gX3VzZVRvYXN0RWZmZWN0LnNob3dUb2FzdDsKCiAgICB2YXIgX3VzZUxvZ2luRWZmZWN0ID0gdXNlTG9naW5FZmZlY3Qoc2hvd1RvYXN0KSwKICAgICAgICB1c2VybmFtZSA9IF91c2VMb2dpbkVmZmVjdC51c2VybmFtZSwKICAgICAgICBwYXNzd29yZCA9IF91c2VMb2dpbkVmZmVjdC5wYXNzd29yZCwKICAgICAgICBoYW5kbGVMb2dpbiA9IF91c2VMb2dpbkVmZmVjdC5oYW5kbGVMb2dpbjsKCiAgICB2YXIgX3VzZVJlZ2lzdGVyRWZmZWN0ID0gdXNlUmVnaXN0ZXJFZmZlY3QoKSwKICAgICAgICBoYW5kbGVSZWdpc3RlckNsaWNrID0gX3VzZVJlZ2lzdGVyRWZmZWN0LmhhbmRsZVJlZ2lzdGVyQ2xpY2s7CgogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLAogICAgICBwYXNzd29yZDogcGFzc3dvcmQsCiAgICAgIHNob3c6IHNob3csCiAgICAgIHRvYXN0TWVzc2FnZTogdG9hc3RNZXNzYWdlLAogICAgICBoYW5kbGVMb2dpbjogaGFuZGxlTG9naW4sCiAgICAgIGhhbmRsZVJlZ2lzdGVyQ2xpY2s6IGhhbmRsZVJlZ2lzdGVyQ2xpY2sKICAgIH07CiAgfQp9Ow=="},{"version":3,"mappings":";;AA0BA,SAASA,QAAT,EAAmBC,MAAnB,QAAiC,KAAjC;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SAASC,IAAT,QAAqB,qBAArB;AACA,OAAOC,KAAP,IAAgBC,cAAhB,QAAsC,wBAAtC,C,CAEA;;AACA,IAAMC,cAAa,GAAI,SAAjBA,cAAiB,CAACC,SAAD,EAAe;AACpC,MAAMC,MAAK,GAAIN,SAAS,EAAxB;AACA,MAAMO,IAAG,GAAIT,QAAQ,CAAC;AAAEU,YAAQ,EAAE,EAAZ;AAAgBC,YAAQ,EAAE;AAA1B,GAAD,CAArB;;AAEA,MAAMC,WAAU;AAAA,uEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEKT,IAAI,CAAC,iBAAD,EAAoB;AAC3CO,wBAAQ,EAAED,IAAI,CAACC,QAD4B;AAE3CC,wBAAQ,EAAEF,IAAI,CAACE;AAF4B,eAApB,CAFT;;AAAA;AAEVE,oBAFU;;AAMhB,kBAAI,OAAM,SAAN,UAAM,WAAN,kBAAM,CAAEC,KAAR,MAAkB,CAAtB,EAAyB;AACvBC,4BAAY,CAACC,OAAb,GAAuB,IAAvB;AACAR,sBAAM,CAACS,IAAP,CAAY;AAAEC,sBAAI,EAAE;AAAR,iBAAZ;AACF,eAHA,MAGO;AACLX,yBAAS,CAAC,MAAD,CAAT;AACF;;AAXgB;AAAA;;AAAA;AAAA;AAAA;AAahBA,uBAAS,CAAC,MAAD,CAAT;;AAbgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAJ;;AAAA,oBAAVK,WAAU;AAAA;AAAA;AAAA,KAAhB;;AAiBA,gBAA+BX,MAAM,CAACQ,IAAD,CAArC;AAAA,MAAQC,QAAR,WAAQA,QAAR;AAAA,MAAkBC,QAAlB,WAAkBA,QAAlB;;AACA,SAAO;AAAED,YAAQ,EAARA,QAAF;AAAYC,YAAQ,EAARA,QAAZ;AAAsBC,eAAW,EAAXA;AAAtB,GAAP;AACF,CAvBA,C,CAyBA;;;AACA,IAAMO,iBAAgB,GAAI,SAApBA,iBAAoB,GAAM;AAC9B,MAAMX,MAAK,GAAIN,SAAS,EAAxB;;AACA,MAAMkB,mBAAkB,GAAI,SAAtBA,mBAAsB,GAAM;AAChCZ,UAAM,CAACS,IAAP,CAAY;AAAEC,UAAI,EAAE;AAAR,KAAZ;AACF,GAFA;;AAGA,SAAO;AAAEE,uBAAkB,EAAlBA;AAAF,GAAP;AACF,CANA;;AAQA,eAAe;AACbF,MAAI,EAAE,OADO;AAEbG,YAAU,EAAE;AAAEjB,SAAI,EAAJA;AAAF,GAFC;AAGb;AACAkB,OAJa,mBAIJ;AACP,0BAA0CjB,cAAc,EAAxD;AAAA,QAAQkB,IAAR,mBAAQA,IAAR;AAAA,QAAcC,YAAd,mBAAcA,YAAd;AAAA,QAA4BjB,SAA5B,mBAA4BA,SAA5B;;AACA,0BAA4CD,cAAc,CAACC,SAAD,CAA1D;AAAA,QAAQG,QAAR,mBAAQA,QAAR;AAAA,QAAkBC,QAAlB,mBAAkBA,QAAlB;AAAA,QAA4BC,WAA5B,mBAA4BA,WAA5B;;AACA,6BAAgCO,iBAAiB,EAAjD;AAAA,QAAQC,mBAAR,sBAAQA,mBAAR;;AAEA,WAAO;AACLV,cAAQ,EAARA,QADK;AACKC,cAAQ,EAARA,QADL;AACeY,UAAI,EAAJA,IADf;AACqBC,kBAAY,EAAZA,YADrB;AAELZ,iBAAW,EAAXA,WAFK;AAEQQ,yBAAmB,EAAnBA;AAFR,KAAP;AAIF;AAba,CAAf","names":["reactive","toRefs","useRouter","post","Toast","useToastEffect","useLoginEffect","showToast","router","data","username","password","handleLogin","result","errno","localStorage","isLogin","push","name","useRegisterEffect","handleRegisterClick","components","setup","show","toastMessage"],"sourceRoot":"","sources":["C:\\Users\\Pipik\\Documents\\JINGDONGDAOJIA\\src\\views\\login\\Login.vue"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <img class=\"wrapper__img\" src='http://www.dell-lee.com/imgs/vue3/user.png' />\n    <div class=\"wrapper__input\">\n      <input\n        class=\"wrapper__input__content\"\n        placeholder=\"用户名\"\n        v-model=\"username\"\n      />\n    </div>\n     <div class=\"wrapper__input\">\n      <input\n        type=\"password\"\n        class=\"wrapper__input__content\"\n        placeholder=\"请输入密码\"\n        v-model=\"password\"\n        autocomplete=\"new-password\"\n      />\n    </div>\n    <div class=\"wrapper__login-button\" @click=\"handleLogin\">登陆</div>\n    <div class=\"wrapper__login-link\" @click=\"handleRegisterClick\">立即注册</div>\n    <Toast v-if=\"show\" :message=\"toastMessage\"/>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { post } from '../../utils/request'\nimport Toast, { useToastEffect } from '../../components/Toast'\n\n// 处理注册逻辑\nconst useLoginEffect = (showToast) => {\n  const router = useRouter()\n  const data = reactive({ username: '', password: '' })\n\n  const handleLogin = async () => {\n    try {\n      const result = await post('/api/user/login', {\n        username: data.username,\n        password: data.password\n      })\n      if (result?.errno === 0) {\n        localStorage.isLogin = true\n        router.push({ name: 'Home' })\n      } else {\n        showToast('登陆失败')\n      }\n    } catch (e) {\n      showToast('请求失败')\n    }\n  }\n\n  const { username, password } = toRefs(data)\n  return { username, password, handleLogin}\n}\n\n// 处理注册跳转\nconst useRegisterEffect = () => {\n  const router = useRouter()\n  const handleRegisterClick = () => {\n    router.push({ name: 'Register' })\n  }\n  return { handleRegisterClick }\n}\n\nexport default {\n  name: 'Login',\n  components: { Toast },\n  // 职责就是告诉你，代码执行的一个流程\n  setup () {\n    const { show, toastMessage, showToast } = useToastEffect()\n    const { username, password, handleLogin } = useLoginEffect(showToast)\n    const { handleRegisterClick } = useRegisterEffect()\n\n    return {\n      username, password, show, toastMessage,\n      handleLogin, handleRegisterClick,\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../style/viriables.scss';\n.wrapper {\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  transform: translateY(-50%);\n  &__img {\n    display: block;\n    margin: 0 auto .4rem auto;\n    width: .66rem;\n    height: .66rem;\n  }\n  &__input {\n    height: .48rem;\n    margin: 0 .4rem .16rem .4rem;\n    padding: 0 .16rem;\n    background: #F9F9F9;\n    border: .01rem solid rgba(0,0,0,0.10);\n    border-radius: .06rem;\n    border-radius: .06rem;\n    &__content {\n      margin-top: .12rem;\n      line-height: .22rem;\n      border: none;\n      outline: none;\n      width: 100%;\n      background: none;\n      font-size: .16rem;\n      color: $content-notice-fontcolor;\n      &::placeholder {\n        color: $content-notice-fontcolor;\n      }\n    }\n  }\n  &__login-button {\n    margin: .32rem .4rem .16rem .4rem;\n    line-height: .48rem;\n    background: #0091FF;\n    box-shadow: 0 .04rem .08rem 0 rgba(0,145,255,0.32);\n    border-radius: .04rem;\n    border-radius: .04rem;\n    color: $bgColor;\n    font-size: .16rem;\n    text-align: center;\n  }\n  &__login-link {\n    text-align: center;\n    font-size: .14rem;\n    color: $content-notice-fontcolor;\n  }\n}\n</style>"]}]}